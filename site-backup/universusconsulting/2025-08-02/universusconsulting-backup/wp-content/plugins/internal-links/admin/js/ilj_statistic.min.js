!function(t){t.fn.ilj_tabnav=function(){var a=this;t(this).find(".nav-tab-wrapper").on("click","a",(function(){t(this).addClass("nav-tab-active"),t(this).siblings("a").removeClass("nav-tab-active"),a.find(".tab-content").removeClass("active"),a.find(".tab-content#"+t(this).data("target")).addClass("active")}))};var a={width:"",maxWidth:"200",useTitle:!0,delay:100,speed:500,background:"#32373c",color:"#eeeeee",size:"small"},e={aria:{sortAscending:ilj_statistic_translation.datatables_aria_sortAscending,sortDescending:ilj_statistic_translation.datatables_aria_sortDescending},paginate:{first:ilj_statistic_translation.datatables_paginate_first,last:ilj_statistic_translation.datatables_paginate_last,next:ilj_statistic_translation.datatables_paginate_next,previous:ilj_statistic_translation.datatables_paginate_previous},emptyTable:ilj_statistic_translation.datatables_empty_table,info:ilj_statistic_translation.datatables_info,infoEmpty:ilj_statistic_translation.datatables_info_empty,infoFiltered:ilj_statistic_translation.datatables_info_filtered,lengthMenu:ilj_statistic_translation.datatables_length_menu,loadingRecords:ilj_statistic_translation.datatables_loading_records,processing:ilj_statistic_translation.datatables_processing,search:ilj_statistic_translation.datatables_search,zeroRecords:ilj_statistic_translation.datatables_zero_records};t((function(){var e=t(".warning-tip");if(e.length){var i=t.extend(Object.assign({},a),{tooltipHover:!0,useTitle:!1,content:t("<div/>").html(e.find(".the-tip").html()).css({margin:"10px 20px",display:"block"}),maxWidth:"250px"});e.iljtipso(i)}})),t((function(){var i=ilj_link_statistic_filter_types.reduce((function(t,a){return void 0===t[a.main_type]&&(t[a.main_type]=new Set),t[a.main_type].add(a.sub_type),t}),{}),n={};Object.keys(i).forEach((function(t,a){n[t]=Array.from(new Set(i[t]))}));var s=function(){var a=t('<div id="ilj-type-filter-wrapper" class="ilj-type-filter-wrapper"/>'),e=t('<ul id="ilj-link-statistics-filter" />'),s=t("<a/>").addClass("ilj-type-filter-dropdown").text(ilj_statistic_translation.filter_type).on("click",(function(){a.toggleClass("show")}));return a.append(s,e),t.each(n,(function(a,n){var s=function(t){switch(t){case"post":t=ilj_statistic_translation.filter_section_posts_pages;break;case"term":t=ilj_statistic_translation.filter_section_taxonomies;break;case"custom":t=ilj_statistic_translation.filter_section_custom_links}return t}(a),r=t("<li/>").html(t("<span/>").text(s)),l=t("<ul/>");e.append(r),n.length&&r.append(l),t.each(n,(function(e,n){var s=t("<input/>").attr({type:"checkbox"}).on("change",(function(){!0===t(this).prop("checked")?i[a].add(n):i[a].delete(n),jQuery(".ilj-statistic-table-links").dataTable().api().ajax.reload()}));i[a].has(n)&&s.attr("checked",!0);var r=t("<label/>").html(t("<span/>").text(n).attr("data-type",a)),o=t("<li/>").addClass("type").html(r);r.prepend(s),l.append(o)}))})),a},r=t(".ilj-statistic").find(".nav-tab-wrapper");function l(t,a,e){const i=document.createElement(t);a&&(i.innerText=a),Object.entries(e).forEach((function([t,a]){i.setAttribute(t,a)}));const n=i.outerHTML;return i.remove(),n}r.length&&t(".ilj-statistic").ilj_tabnav(),t(".tip").iljtipso(a),function(){!function(){var t=document.createElement("table");t.className="ilj-statistic-table-links display";var a=document.createElement("thead"),e=document.createElement("tr");header_titles.forEach((t=>{var a=document.createElement("th");"Type"===t&&(a.className="type"),a.textContent=t,e.appendChild(a)})),a.appendChild(e);var i=document.createElement("tbody");t.appendChild(a),t.appendChild(i);var n=document.getElementById("statistic-links");n&&n.appendChild(t)}();var n=jQuery(".ilj-statistic-table-links");jQuery(".ilj-statistic-table-links tbody").append(""),r.show(),t("#statistic-links").append(n);var o=n.DataTable({stateSave:!1,serverSide:!0,processing:!0,searchDelay:800,ajax:{beforeSend:function(){t("#link-statistics-loader").show()},url:ajaxurl,type:"POST",data:{action:"load_link_statistics",nonce:ilj_dashboard.nonce,main_types:function(){return Object.keys(i)},sub_types:function(){var t=Object.values(i).reduce((function(t,a){return t.concat(Array.from(a))}),[]);return Array.from(new Set(t))}}},columnDefs:[{className:"asset-title",responsivePriority:1,targets:0,data:null,render:function(t,a,e){return e.title.replace(/<\/?[^>]+(>|$)/g,"")}},{targets:1,data:null,render:function(t,a,e){return e.keywords_count}},{className:"type",responsivePriority:2,data:null,targets:2,render:function(t,a,e){return l("span",e.sub_type?e.sub_type:e.main_type,{"data-type":e.main_type})}},{responsivePriority:3,data:null,targets:3,render:function(t,a,e){return 0===parseInt(e.incoming_links)?"-":l("a",e.incoming_links,{"data-type":e.main_type,title:ilj_statistic_translation.show_incoming_links,class:"tip ilj-statistic-detail","data-id":e.id,"data-direction":"to"})}},{responsivePriority:4,data:null,targets:4,render:function(t,a,e){return 0===parseInt(e.outgoing_links)?"-":l("a",e.outgoing_links,{"data-type":e.main_type,title:ilj_statistic_translation.show_outgoing_links,class:"tip ilj-statistic-detail","data-id":e.id,"data-direction":"from"})}},{responsivePriority:5,data:null,targets:5,orderable:!1,render:function(t,a,e){return`<a href="${e.edit_link}" title="${e.edit_title}" class="tip"><span class="dashicons dashicons-edit"></span></a> <a class="tip"  target="_blank" rel="noopener" href="${e.permalink}" title="${e.permalink_title}"><span class="dashicons dashicons-external"></span></a>`}}],language:e,stateLoaded:function(t,e){n.find(".tip").iljtipso(a)},drawCallback:function(a){const e=document.getElementById("ilj-type-filter-wrapper");e&&e.parentNode.removeChild(e),t("#statistic-links .dataTables_wrapper .dataTables_filter").append(s()),t("#link-statistics-loader").hide()},responsive:!0});t(".dataTables_filter input",n.closest(".dataTables_wrapper")).off(),t(".dataTables_filter input",n.closest(".dataTables_wrapper")).on("keyup",(function(t){13===t.keyCode&&o.search(this.value).draw()})),n.find(".tip").iljtipso(a),n.on("click",".ilj-statistic-detail",(function(){t(".ilj-statistic-cover").show();var a=t(this).data("id"),e=t(this).data("type"),i=t(this).data("direction"),n="",s=0,r=t(this).closest("tr").find("td.asset-title").text();"to"==i?(n=ilj_statistic_translation.incoming_links,s=t(this).closest('a[data-direction="to"]').text()):"from"==i&&(n=ilj_statistic_translation.outgoing_links,s=t(this).closest('a[data-direction="from"]').text());var l={action:"ilj_render_link_detail_statistic",nonce:ilj_dashboard.nonce,id:a,type:e,direction:i};t.ajax({url:ajaxurl,type:"POST",data:l}).done((function(a){ilj_create_modal(n+' "'+r+'" ('+s+")",t("<div/>").addClass("ilj-statistic").html(a)),t(".ilj-statistic-cover").hide()}))}))}(),function(){!function(){var t=document.createElement("table");t.className="ilj-statistic-table-anchors display";var a=document.createElement("thead"),e=document.createElement("tr");"undefined"!=typeof headerLabels&&headerLabels.forEach((function(t){var a=document.createElement("th");a.textContent=t,e.appendChild(a)})),a.appendChild(e);var i=document.createElement("tbody");t.appendChild(a),t.appendChild(i);var n=document.getElementById("statistic-anchors");n&&n.appendChild(t)}();var i=ajaxurl.replace("admin-ajax.php","images/spinner.gif");t("body").append('<div style="position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);display:none" id="loading-icon"><img src="'+i+'" alt="'+ilj_dashboard.loadingText+'"></div>');var n=t("#loading-icon"),s=jQuery(".ilj-statistic-table-anchors");t("#statistic-anchors").html(s);var r=s.DataTable({ajax:{url:ajaxurl,type:"POST",data:function(t){t.action="load_anchor_statistics_chunk",t.nonce=ilj_dashboard.nonce}},processing:!1,serverSide:!0,language:e,stateLoaded:function(t,e){s.find(".tip").iljtipso(a)},columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,searchable:!1,targets:3},{responsivePriority:3,searchable:!1,orderable:!1,targets:2},{responsivePriority:4,searchable:!1,orderable:!1,targets:1}],responsive:!0,searchDelay:1e3}).on("processing.dt",(function(t,a,e){n.toggle(e)}));t("#statistic-anchors input").off("keypress").on("keypress",(function(t){13==t.which&&r.search(this.value).draw()})),s.on("click",".ilj-statistic-detail",(function(){t(".ilj-statistic-cover").show();var a=t(this).data("anchor"),e=t(this).text(),i={action:"ilj_render_anchor_detail_statistic",nonce:ilj_dashboard.nonce,anchor:a};t.ajax({url:ajaxurl,type:"POST",data:i}).done((function(i){ilj_create_modal(ilj_statistic_translation.anchor_text+' "'+a+'" ('+e+")",t("<div/>").addClass("ilj-statistic").html(i)),t(".ilj-statistic-cover").hide()}))}))}()})),t(document).on("mouseup",(function(a){var e=t("#ilj-type-filter-wrapper");e.is(a.target)||0!==e.has(a.target).length||e.removeClass("show")}))}(jQuery);
//# sourceMappingURL=ilj_statistic.min.js.map